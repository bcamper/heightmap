!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var s,r=function(t,e,i,s){return new(i||(i=Promise))((function(r,h){function n(t){try{l(s.next(t))}catch(t){h(t)}}function a(t){try{l(s.throw(t))}catch(t){h(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,a)}l((s=s.apply(t,e||[])).next())}))};class h{constructor(t,e,i,s={}){this.frame=0,this.elapsed=0,this.lastTime=0,this.fpsSampleRange=s.fpsSampleRange||200,this.startFrameTime=0,this.frameTime=0,this.pixelRatio=s.pixelRatio||1,this.width=t*this.pixelRatio,this.height=e*this.pixelRatio,this.canvas=i,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width=`${t}px`,this.canvas.style.height=`${e}px`,this.origin={x:this.width/2,y:this.height/2},this.ctx=this.canvas.getContext("2d"),this.imageData=this.ctx.createImageData(this.width,this.height),this.pixels=new Uint32Array(this.imageData.data.buffer),this.background=new Uint32Array(this.pixels.length),this.background.set(this.pixels)}clearScreen(){this.pixels.set(this.background)}blitScreen(){this.ctx.putImageData(this.imageData,0,0)}advanceFrame(t){this.frame++,null!=t&&null!=this.lastTime&&(this.elapsed+=t-this.lastTime,this.frame%this.fpsSampleRange==0&&(this.elapsed=0)),this.lastTime=t}fps(){return Math.round(1e3/(this.elapsed/(this.frame%this.fpsSampleRange)))}timePerFrame(){return this.frameTime/this.frame}startFrameTimer(){this.startFrameTime=+new Date}endFrameTimer(){this.frameTime+=+new Date-this.startFrameTime}static rgba(t,e,i,s=null){return t|e<<8|i<<16|(s||255)<<24}static setRGB(t,e){return 16777215&e|t&255<<24}static setAlpha(t,e){return 16777215&t|e<<24}static loadImage(t){return r(this,void 0,void 0,(function*(){return new Promise((e,i)=>{const s=new Image;s.onload=()=>e(s),s.onerror=()=>i(),s.src=t})}))}static dataFromImage(t){if(null==t)return null;const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");return i.drawImage(t,0,0,t.width,t.height),i.getImageData(0,0,t.width,t.height)}static makePaletteForGradients(t,e){let i=null;e.forEach((function(t){(null==i||t[1]>i)&&(i=t[1])}));const s=new Uint32Array(i);return e.forEach((function(e){var i,r,h,n,a;for(r=e[0],h=e[1],n=t[e[2]],a=t[e[3]],i=r;i<r+h;i++)s[i]=(a[0]-n[0])*(i-r)/(h-r)+n[0]|(a[1]-n[1])*(i-r)/(h-r)+n[1]<<8|(a[2]-n[2])*(i-r)/(h-r)+n[2]<<16|255<<24})),s}}class n{constructor(t,e){return{x:t,y:e}}static copy(t){return null==t?null:{x:t.x,y:t.y}}static equals(t,e){return null!=t&&null!=e&&(t.x==e.x&&t.y==e.y)}static rotate(t,e){return new n(t.x*Math.cos(e*Math.PI/180)+t.y*-Math.sin(e*Math.PI/180),t.x*Math.sin(e*Math.PI/180)+t.y*Math.cos(e*Math.PI/180))}static print(t){return null==t?null:"("+t.x+", "+t.y+")"}}class a{constructor(t,e={}){if(this.line=t,this.line.start.x=Math.round(this.line.start.x),this.line.start.y=Math.round(this.line.start.y),this.line.end.x=Math.round(this.line.end.x),this.line.end.y=Math.round(this.line.end.y),this.position=n.copy(this.line.start),this.delta=new n(Math.abs(this.line.end.x-this.line.start.x),Math.abs(this.line.end.y-this.line.start.y)),this.step=new n(this.line.start.x<this.line.end.x?1:-1,this.line.start.y<this.line.end.y?1:-1),this.accumulator=this.delta.x>=this.delta.y?this.delta.x/2:this.delta.y/2,Object.keys(e).length>0){this.properties={},this.propertyDeltas={};for(const t in e)this.properties[t]=e[t][0],this.propertyDeltas[t]=e[t][1]-e[t][0],this.delta.x>=this.delta.y?this.propertyDeltas[t]/=this.delta.x:this.propertyDeltas[t]/=this.delta.y}}next(){if(null!=this.position)if(n.equals(this.position,this.line.end))this.position=null;else if(this.delta.x>=this.delta.y?(this.position.x+=this.step.x,0!=this.step.y&&(this.accumulator-=this.delta.y,this.accumulator<0&&(this.position.y+=this.step.y,this.accumulator+=this.delta.x))):(this.position.y+=this.step.y,0!=this.step.x&&(this.accumulator-=this.delta.x,this.accumulator<0&&(this.position.x+=this.step.x,this.accumulator+=this.delta.y))),null!=this.properties)for(const t in this.properties)this.properties[t]+=this.propertyDeltas[t]}}!function(t){t[t.left=0]="left",t[t.right=1]="right",t[t.both=2]="both"}(s||(s={}));class l{constructor(t,e){this.display=e,this.vertexes=t,this.vertexesTransformed=new Array(this.vertexes.length),this.position=new n(0,0),this.rotation=0,this.ymin=null,this.ymax=null,this.leftEdges=new Int16Array(this.display.height),this.rightEdges=new Int16Array(this.display.height),this.leftEdgeProperties={},this.rightEdgeProperties={},this.rowPropertyDeltas={}}traceEdges(t,e=null){if(null==t)return!1;let i,r;for(let t=0;t<this.vertexes.length;t++)this.vertexesTransformed[t]=n.rotate(this.vertexes[t],this.rotation),(null==i||this.vertexesTransformed[t].y<i.y)&&(i=this.vertexesTransformed[t],r=t);for(let i=0;i<this.vertexes.length;i++){const h=this.vertexes[(i+r)%this.vertexes.length],l=this.vertexes[(i+r+1)%this.vertexes.length],o={start:this.vertexesTransformed[(i+r)%this.vertexes.length],end:this.vertexesTransformed[(i+r+1)%this.vertexes.length]};let d;if(e){d={};for(const t of e)d[t]=[h[t],l[t]]}let u=s.right;o.end.y<o.start.y?u=s.left:o.end.y===o.start.y&&(u=s.both);const c=new a(o,d),p=new n(0,0);for(;null!=c.position;)p.x=c.position.x+this.position.x+this.display.origin.x,p.y=c.position.y+this.position.y+this.display.origin.y,t.call(this,p,c.properties,u),c.next()}return!0}rasterize(t=[],e=null){this.ymin=null,this.ymax=null;for(let t=0;t<this.display.height;t++)this.leftEdges[t]=-1,this.rightEdges[t]=-1;for(const e of t)null==this.leftEdgeProperties[e]&&(this.leftEdgeProperties[e]=new Array(this.display.height)),null==this.rightEdgeProperties[e]&&(this.rightEdgeProperties[e]=new Array(this.display.height)),null==this.rowPropertyDeltas[e]&&(this.rowPropertyDeltas[e]=new Array(this.display.height));this.traceEdges((function(t,e,i){if((null==this.ymin||t.y<this.ymin)&&(this.ymin=t.y),(null==this.ymax||t.y>this.ymax)&&(this.ymax=t.y),this.ymin<0)this.ymin=0;else if(this.ymax>=this.display.height)this.ymax=this.display.height-1;else if(i===s.left||i===s.both){const i=this.leftEdges[t.y];if(-1===i||t.x<i){this.leftEdges[t.y]=t.x;for(const i in e)this.leftEdgeProperties[i][t.y]=e[i]}}else if(i===s.right||i===s.both){const i=this.rightEdges[t.y];if(-1===i||t.x>i){this.rightEdges[t.y]=t.x;for(const i in e)this.rightEdgeProperties[i][t.y]=e[i]}}}),t);for(let e=this.ymin;e<=this.ymax;e++){const i=this.rightEdges[e]-this.leftEdges[e];for(const s of t)this.rowPropertyDeltas[s][e]=(this.rightEdgeProperties[s][e]-this.leftEdgeProperties[s][e])/i}if("function"==typeof e){const i=[];for(let s=this.ymax;s>=this.ymin;s--){let r=0;i[r++]=s,i[r++]=this.leftEdges[s],i[r++]=this.rightEdges[s];for(const e of t)i[r++]=this.leftEdgeProperties[e][s],i[r++]=this.rowPropertyDeltas[e][s];e.apply(this,i)}}}renderEdges(t){this.traceEdges(e=>{this.display.pixels[e.y*this.display.width+e.x]=t})}renderGradient(){this.rasterize(["r","g","b"],(function(t,e,i,s,r,h,n,a,l){let o=t*this.display.width+e;for(let t=e;t<i;t++,o++)this.display.pixels[o]=s+(h<<8)+(a<<16)+(255<<24),s+=r,h+=n,a+=l}))}setTexture(t){this.texture=t,this.tex32=new Uint32Array(this.texture.data.buffer)}renderTexture(){if(null!=this.texture){this.rasterize(["u","v"]),this.display.startFrameTimer();for(let t=this.ymin;t<=this.ymax;t++){let e=this.leftEdgeProperties.u[t];const i=this.rowPropertyDeltas.u[t];let s=this.leftEdgeProperties.v[t];const r=this.rowPropertyDeltas.v[t],h=this.leftEdges[t],n=this.rightEdges[t];let a=t*this.display.width+h;for(let t=h;t<n;t++)this.display.pixels[a]=this.tex32[(~~s<<8)+~~e],e+=i,s+=r,a++}this.display.endFrameTimer()}}static vertexesForNSided(t,e,i={}){const s=[],r=360/t,h=1&t?0:-r/2,a=new n(0,-e);for(let l=0;l<t;l++)s[l]=n.rotate(a,r*l+h),null!=i.texture&&(s[l].u=(s[l].x+e)/e/2*i.texture.width,s[l].v=(s[l].y+e)/e/2*i.texture.height);return s}}var o=function(t,e,i,s){return new(i||(i=Promise))((function(r,h){function n(t){try{l(s.next(t))}catch(t){h(t)}}function a(t){try{l(s.throw(t))}catch(t){h(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,a)}l((s=s.apply(t,e||[])).next())}))};const d=document.getElementById("canvas"),u=new h(560,560,d,{pixelRatio:1}),c=new class extends l{constructor(t,e){super(t,e),this.xheights=new Int16Array(this.display.width),this.xheights_empty=new Int16Array(this.display.width);for(let t=0;t<this.xheights_empty.length;t++)this.xheights_empty[t]=this.display.height}renderHeightmap(){const{width:t,height:e,pixels:i}=this.display;if(null!=this.texture){this.display.startFrameTimer(),this.rasterize(["u","v"]),this.xheights.set(this.xheights_empty);for(let s=this.ymax;s>=this.ymin;s--){let r=this.leftEdgeProperties.u[s],h=this.leftEdgeProperties.v[s];const n=this.rowPropertyDeltas.u[s],a=this.rowPropertyDeltas.v[s];let l=this.leftEdges[s],o=this.rightEdges[s];l<0&&(r+=-l*n,h+=-l*a,l=0),o>=t&&(o=t);for(let d=l;d<o;d++){const l=this.tex32[(~~h<<8)+~~r];let o=l>>>24;if(o=s-o,o<0&&(o=0),this.xheights[d]==e&&(this.xheights[d]=o),o<this.xheights[d]){let e=this.xheights[d]*t+d;for(let s=this.xheights[d];s>=o;s--)i[e]=l|255<<24,e-=t;this.xheights[d]=o}r+=n,h+=a}}this.display.endFrameTimer()}}}(l.vertexesForNSided(6,225,{texture:{width:256,height:256}}),u);c.position=new n(0,50),c.vertexes.forEach((function(t,e){t.r=256*e/c.vertexes.length+0,t.g=(e+c.vertexes.length/3)%c.vertexes.length*256/c.vertexes.length+0,t.b=(e+2*c.vertexes.length/3)%c.vertexes.length*256/c.vertexes.length+0})),o(void 0,void 0,void 0,(function*(){const t=yield h.loadImage("heightmap.png");let e,i,s;for(c.setTexture(h.dataFromImage(t)),e=h.makePaletteForGradients({pure_blue:[0,0,255],dark_blue:[0,26,255],med_blue:[0,103,255],light_blue:[0,179,255],dark_green:[0,80,13],med_green:[64,128,0],light_green:[128,196,0],brown:[80,48,0],white:[252,252,252]},[[0,8,"pure_blue","dark_blue"],[8,24,"dark_blue","med_blue"],[24,32,"med_blue","light_blue"],[32,64,"dark_green","med_green"],[64,120,"med_green","light_green"],[120,180,"light_green","brown"],[180,210,"brown","white"],[210,256,"white","white"]]),i=0;i<c.texture.width*c.texture.height;i++)s=255&c.tex32[i],c.tex32[i]=e[s],c.tex32[i]=h.setAlpha(c.tex32[i],s/2);y()}));let p=null;document.onkeydown=function(t){37==t.keyCode?p="left":39==t.keyCode?p="right":38==t.keyCode?p="up":40==t.keyCode&&(p="down")},document.onkeyup=function(t){p=null};function y(t=+new Date){u.clearScreen(),c.renderHeightmap(),c.rotation+=.5,u.blitScreen(),u.advanceFrame(t),requestAnimationFrame(y)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BvbHlnb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Rpc3BsYXkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BvaW50LnRzIiwid2VicGFjazovLy8uL3NyYy9saW5lLnRzIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzIiwid2VicGFjazovLy8uL3NyYy9oZWlnaHRtYXAudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJFZGdlIiwiRGlzcGxheSIsIndpZHRoIiwiaGVpZ2h0IiwiY2FudmFzIiwib3B0aW9ucyIsInRoaXMiLCJmcmFtZSIsImVsYXBzZWQiLCJsYXN0VGltZSIsImZwc1NhbXBsZVJhbmdlIiwic3RhcnRGcmFtZVRpbWUiLCJmcmFtZVRpbWUiLCJwaXhlbFJhdGlvIiwic3R5bGUiLCJvcmlnaW4iLCJ4IiwieSIsImN0eCIsImdldENvbnRleHQiLCJpbWFnZURhdGEiLCJjcmVhdGVJbWFnZURhdGEiLCJwaXhlbHMiLCJVaW50MzJBcnJheSIsImRhdGEiLCJidWZmZXIiLCJiYWNrZ3JvdW5kIiwibGVuZ3RoIiwic2V0IiwicHV0SW1hZ2VEYXRhIiwidGltZSIsIk1hdGgiLCJyb3VuZCIsIkRhdGUiLCJnIiwiYiIsImEiLCJyZ2IiLCJ1cmwiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImltZyIsIkltYWdlIiwib25sb2FkIiwib25lcnJvciIsInNyYyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImRyYXdJbWFnZSIsImdldEltYWdlRGF0YSIsImNvbG9ycyIsImJhbmRzIiwibWF4cCIsImZvckVhY2giLCJiYW5kIiwicGFsZXR0ZSIsImIxIiwiYjIiLCJjMSIsImMyIiwiUG9pbnQiLCJmaXJzdCIsInNlY29uZCIsInRoZXRhIiwiY29zIiwiUEkiLCJzaW4iLCJsaW5lIiwicHJvcGVydGllcyIsInN0YXJ0IiwiZW5kIiwicG9zaXRpb24iLCJjb3B5IiwiZGVsdGEiLCJhYnMiLCJzdGVwIiwiYWNjdW11bGF0b3IiLCJrZXlzIiwicHJvcGVydHlEZWx0YXMiLCJrIiwiZXF1YWxzIiwidmVydGV4ZXMiLCJkaXNwbGF5IiwidmVydGV4ZXNUcmFuc2Zvcm1lZCIsIkFycmF5Iiwicm90YXRpb24iLCJ5bWluIiwieW1heCIsImxlZnRFZGdlcyIsIkludDE2QXJyYXkiLCJyaWdodEVkZ2VzIiwibGVmdEVkZ2VQcm9wZXJ0aWVzIiwicmlnaHRFZGdlUHJvcGVydGllcyIsInJvd1Byb3BlcnR5RGVsdGFzIiwidHJhbnNmb3JtIiwicHJvcGVydHlLZXlzIiwidnRvcCIsInZ0b3BJbmRleCIsInYiLCJyb3RhdGUiLCJ2c3RhcnQiLCJ2ZW5kIiwicGsiLCJlZGdlIiwicmlnaHQiLCJsZWZ0IiwiYm90aCIsInRyYWNlciIsIm5leHQiLCJ0cmFjZUVkZ2VzIiwiYXJncyIsImFwcGx5IiwiY29sb3IiLCJyYXN0ZXJpemUiLCJyZGVsdGEiLCJnZGVsdGEiLCJiZGVsdGEiLCJvZmYiLCJ0ZXh0dXJlIiwidGV4MzIiLCJzdGFydEZyYW1lVGltZXIiLCJ1IiwidWRlbHRhIiwidmRlbHRhIiwiZW5kRnJhbWVUaW1lciIsInNpemUiLCJhbmdsZSIsImFuZ2xlT2ZmIiwiZ2V0RWxlbWVudEJ5SWQiLCJwb2x5Z29uIiwic3VwZXIiLCJ4aGVpZ2h0cyIsInhoZWlnaHRzX2VtcHR5IiwiaCIsInoiLCJ2ZXJ0ZXhlc0Zvck5TaWRlZCIsInZlcnRleCIsImxvYWRJbWFnZSIsInNldFRleHR1cmUiLCJkYXRhRnJvbUltYWdlIiwibWFrZVBhbGV0dGVGb3JHcmFkaWVudHMiLCJwdXJlX2JsdWUiLCJkYXJrX2JsdWUiLCJtZWRfYmx1ZSIsImxpZ2h0X2JsdWUiLCJkYXJrX2dyZWVuIiwibWVkX2dyZWVuIiwibGlnaHRfZ3JlZW4iLCJicm93biIsIndoaXRlIiwic2V0QWxwaGEiLCJsb29wIiwib25rZXlkb3duIiwiZXZlbnQiLCJrZXlDb2RlIiwib25rZXl1cCIsImNsZWFyU2NyZWVuIiwicmVuZGVySGVpZ2h0bWFwIiwiYmxpdFNjcmVlbiIsImFkdmFuY2VGcmFtZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIs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YUFDdkIsQ0FBQyxHQUFJLElBQUssWUFBYSxlQUN2QixDQUFDLElBQUssSUFBSyxjQUFlLFNBQzFCLENBQUMsSUFBSyxJQUFLLFFBQVMsU0FDcEIsQ0FBQyxJQUFLLElBQUssUUFBUyxXQUtqQnhKLEVBQUksRUFBR0EsRUFBSW9JLEVBQVFYLFFBQVFySCxNQUFRZ0ksRUFBUVgsUUFBUXBILE9BQVFMLElBQzlEekIsRUFBdUIsSUFBbkI2SixFQUFRVixNQUFNMUgsR0FDbEJvSSxFQUFRVixNQUFNMUgsR0FBSzBELEVBQVFuRixHQUMzQjZKLEVBQVFWLE1BQU0xSCxHQUFLRyxFQUFRc0osU0FBU3JCLEVBQVFWLE1BQU0xSCxHQUFJekIsRUFBSSxHQXNCNURtTCxPQUlGLElBQUlqSyxFQUFNLEtBRVZ3RCxTQUFTMEcsVUFBWSxTQUFVQyxHQUNSLElBQWpCQSxFQUFNQyxRQUNScEssRUFBTSxPQUVrQixJQUFqQm1LLEVBQU1DLFFBQ2JwSyxFQUFNLFFBRWtCLElBQWpCbUssRUFBTUMsUUFDYnBLLEVBQU0sS0FFa0IsSUFBakJtSyxFQUFNQyxVQUNicEssRUFBTSxTQUlWd0QsU0FBUzZHLFFBQVUsU0FBVUYsR0FDM0JuSyxFQUFNLE1BTVIsU0FBU2lLLEVBQU0xSCxHQUFpQixJQUFJRyxNQUNsQyxFQUFRNEgsY0FLUjNCLEVBQVE0QixrQkFFUjVCLEVBQVE1QyxVQVZBLEdBaUNSLEVBQVF5RSxhQUNSLEVBQVFDLGFBQWFsSSxHQUNyQm1JLHNCQUFzQlQiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IERpc3BsYXkgZnJvbSAnLi9kaXNwbGF5JztcbmltcG9ydCBQb2ludCBmcm9tICcuL3BvaW50JztcbmltcG9ydCBMaW5lVHJhY2VyLCB7IFByb3BlcnR5VmFsdWVEaWN0aW9uYXJ5LCBQcm9wZXJ0eVJhbmdlRGljdGlvbmFyeSB9IGZyb20gJy4vbGluZSc7XG5cbmVudW0gRWRnZSB7IGxlZnQsIHJpZ2h0LCBib3RoIH1cblxuZXhwb3J0IGludGVyZmFjZSBWZXJ0ZXggZXh0ZW5kcyBQb2ludCB7XG4vLyBpbnRlcmZhY2UgVmVydGV4IHtcbiAgW2luZGV4OiBzdHJpbmddOiBudW1iZXI7IC8vIGFkZGl0aW9uYWwgdmVydGV4LXNwZWNpZmljIHByb3BlcnRpZXNcbn1cblxuaW50ZXJmYWNlIFByb3BlcnR5VmFsdWVSb3dEaWN0aW9uYXJ5IHtcbiAgW2luZGV4OiBzdHJpbmddOiBudW1iZXJbXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9seWdvbiB7XG4gIGRpc3BsYXk6IERpc3BsYXk7XG4gIHZlcnRleGVzOiBWZXJ0ZXhbXTtcbiAgdmVydGV4ZXNUcmFuc2Zvcm1lZDogUG9pbnRbXTtcbiAgcG9zaXRpb246IFBvaW50O1xuICByb3RhdGlvbjogbnVtYmVyO1xuXG4gIHltaW46IG51bWJlcjtcbiAgeW1heDogbnVtYmVyO1xuICBsZWZ0RWRnZXM6IEludDE2QXJyYXk7XG4gIHJpZ2h0RWRnZXM6IEludDE2QXJyYXk7XG4gIGxlZnRFZGdlUHJvcGVydGllczogUHJvcGVydHlWYWx1ZVJvd0RpY3Rpb25hcnk7XG4gIHJpZ2h0RWRnZVByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVSb3dEaWN0aW9uYXJ5O1xuICByb3dQcm9wZXJ0eURlbHRhczogUHJvcGVydHlWYWx1ZVJvd0RpY3Rpb25hcnk7XG5cbiAgdGV4dHVyZTogSW1hZ2VEYXRhO1xuICB0ZXgzMjogVWludDMyQXJyYXk7XG5cbiAgY29uc3RydWN0b3IodmVydGV4ZXM6IFZlcnRleFtdLCBkaXNwbGF5OiBEaXNwbGF5KSB7XG4gICAgdGhpcy5kaXNwbGF5ID0gZGlzcGxheTtcbiAgICB0aGlzLnZlcnRleGVzID0gdmVydGV4ZXM7IC8vIHZlcnRleGVzIG11c3QgYmUgY2xvY2t3aXNlXG4gICAgdGhpcy52ZXJ0ZXhlc1RyYW5zZm9ybWVkID0gbmV3IEFycmF5KHRoaXMudmVydGV4ZXMubGVuZ3RoKTtcbiAgICB0aGlzLnBvc2l0aW9uID0gbmV3IFBvaW50KDAsIDApO1xuICAgIHRoaXMucm90YXRpb24gPSAwO1xuXG4gICAgdGhpcy55bWluID0gbnVsbDtcbiAgICB0aGlzLnltYXggPSBudWxsO1xuICAgIHRoaXMubGVmdEVkZ2VzID0gbmV3IEludDE2QXJyYXkodGhpcy5kaXNwbGF5LmhlaWdodCk7XG4gICAgdGhpcy5yaWdodEVkZ2VzID0gbmV3IEludDE2QXJyYXkodGhpcy5kaXNwbGF5LmhlaWdodCk7XG5cbiAgICB0aGlzLmxlZnRFZGdlUHJvcGVydGllcyA9IHt9O1xuICAgIHRoaXMucmlnaHRFZGdlUHJvcGVydGllcyA9IHt9O1xuICAgIHRoaXMucm93UHJvcGVydHlEZWx0YXMgPSB7fTtcbiAgfVxuXG4gIC8qIFJhc3Rlcml6YXRpb24gbWV0aG9kcyAqL1xuXG4gIHRyYWNlRWRnZXModHJhbnNmb3JtOiBGdW5jdGlvbiwgcHJvcGVydHlLZXlzOiBzdHJpbmdbXSA9IG51bGwpOiBib29sZWFuIHtcbiAgICBpZiAodHJhbnNmb3JtID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBGaW5kIHRvcCB2ZXJ0ZXhcbiAgICBsZXQgdnRvcDogUG9pbnQ7XG4gICAgbGV0IHZ0b3BJbmRleDpudW1iZXI7XG4gICAgZm9yIChsZXQgdiA9IDA7IHYgPCB0aGlzLnZlcnRleGVzLmxlbmd0aDsgdiArKykge1xuICAgICAgdGhpcy52ZXJ0ZXhlc1RyYW5zZm9ybWVkW3ZdID0gUG9pbnQucm90YXRlKHRoaXMudmVydGV4ZXNbdl0sIHRoaXMucm90YXRpb24pO1xuXG4gICAgICAvLyBTb21lIGV4cGVyaW1lbnRzIHdpdGggdmlldyB0cmFuc2Zvcm1zXG4gICAgICAvLyB0aGlzLnZlcnRleGVzVHJhbnNmb3JtZWRbdl0ueSAvPSB0aGlzLnRpbHQ7IC8vIGNhbiBiZSB1c2VkIGZvciAndGhyZWUtcXVhcnRlciB2aWV3JyBzdHlsZVxuICAgICAgLy8gdGhpcy52ZXJ0ZXhlc1RyYW5zZm9ybWVkW3ZdLnggKj0gdGhpcy56b29tO1xuICAgICAgLy8gdGhpcy52ZXJ0ZXhlc1RyYW5zZm9ybWVkW3ZdLnkgKj0gdGhpcy56b29tO1xuXG4gICAgICBpZiAodnRvcCA9PSBudWxsIHx8IHRoaXMudmVydGV4ZXNUcmFuc2Zvcm1lZFt2XS55IDwgdnRvcC55KSB7XG4gICAgICAgIHZ0b3AgPSB0aGlzLnZlcnRleGVzVHJhbnNmb3JtZWRbdl07XG4gICAgICAgIHZ0b3BJbmRleCA9IHY7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJhY2UgYWxsIGVkZ2VzXG4gICAgZm9yIChsZXQgdiA9IDA7IHYgPCB0aGlzLnZlcnRleGVzLmxlbmd0aDsgdiArKykge1xuICAgICAgY29uc3QgdnN0YXJ0OiBWZXJ0ZXggPSB0aGlzLnZlcnRleGVzWyh2ICsgdnRvcEluZGV4KSAlIHRoaXMudmVydGV4ZXMubGVuZ3RoXTtcbiAgICAgIGNvbnN0IHZlbmQ6IFZlcnRleCA9IHRoaXMudmVydGV4ZXNbKHYgKyB2dG9wSW5kZXggKyAxKSAlIHRoaXMudmVydGV4ZXMubGVuZ3RoXTtcblxuICAgICAgY29uc3QgbGluZSA9IHtcbiAgICAgICAgc3RhcnQ6IHRoaXMudmVydGV4ZXNUcmFuc2Zvcm1lZFsodiArIHZ0b3BJbmRleCkgJSB0aGlzLnZlcnRleGVzLmxlbmd0aF0sXG4gICAgICAgIGVuZDogdGhpcy52ZXJ0ZXhlc1RyYW5zZm9ybWVkWyh2ICsgdnRvcEluZGV4ICsgMSkgJSB0aGlzLnZlcnRleGVzLmxlbmd0aF1cbiAgICAgIH07XG5cbiAgICAgIC8vIFRPRE86IGFsbG93IHByb3BlcnRpZXMgdG8gYmUgc2V0IHZpYSBhIHByb3ZpZGVkIGZ1bmN0aW9uLCB0byBzdXBwb3J0IGRpZmZlcmVudCBkYXRhIHN0cnVjdHVyZXNcbiAgICAgIC8vIHByb3BlcnR5S2V5c1trXSh2c3RhcnQsIHZlbmQpIC0+IHJldHVybnMgW2Zyb20sIHRvXVxuICAgICAgbGV0IHByb3BlcnRpZXM6IFByb3BlcnR5UmFuZ2VEaWN0aW9uYXJ5O1xuICAgICAgaWYgKHByb3BlcnR5S2V5cykge1xuICAgICAgICBwcm9wZXJ0aWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgcGsgb2YgcHJvcGVydHlLZXlzKSB7XG4gICAgICAgICAgcHJvcGVydGllc1twa10gPSBbdnN0YXJ0W3BrXSwgdmVuZFtwa11dO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBlZGdlOkVkZ2UgPSBFZGdlLnJpZ2h0O1xuICAgICAgaWYgKGxpbmUuZW5kLnkgPCBsaW5lLnN0YXJ0LnkpIHtcbiAgICAgICAgZWRnZSA9IEVkZ2UubGVmdDtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGxpbmUuZW5kLnkgPT09IGxpbmUuc3RhcnQueSkge1xuICAgICAgICBlZGdlID0gRWRnZS5ib3RoO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0cmFjZXI6TGluZVRyYWNlciA9IG5ldyBMaW5lVHJhY2VyKGxpbmUsIHByb3BlcnRpZXMpO1xuXG4gICAgICAvLyBUcmFjZSBlZGdlLCBhbmQgcnVuIHRyYW5zZm9ybSBmdW5jdGlvbiBvbiBlYWNoIHBpeGVsXG4gICAgICBjb25zdCBwOiBQb2ludCA9IG5ldyBQb2ludCgwLCAwKTtcbiAgICAgIHdoaWxlICh0cmFjZXIucG9zaXRpb24gIT0gbnVsbCkge1xuICAgICAgICBwLnggPSB0cmFjZXIucG9zaXRpb24ueCArIHRoaXMucG9zaXRpb24ueCArIHRoaXMuZGlzcGxheS5vcmlnaW4ueDtcbiAgICAgICAgcC55ID0gdHJhY2VyLnBvc2l0aW9uLnkgKyB0aGlzLnBvc2l0aW9uLnkgKyB0aGlzLmRpc3BsYXkub3JpZ2luLnk7XG4gICAgICAgIHRyYW5zZm9ybS5jYWxsKHRoaXMsIHAsIHRyYWNlci5wcm9wZXJ0aWVzLCBlZGdlKTtcbiAgICAgICAgdHJhY2VyLm5leHQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIFRPRE86IG1vdmUgcmFzdGVyaXplZCBpbmZvIHNlcGFyYXRlIG9iamVjdC9kYXRhIHN0cnVjdHVyZSBmcm9tIGNvcmUgcG9seWdvbj9cbiAgcmFzdGVyaXplKHByb3BlcnR5S2V5czogc3RyaW5nW10gPSBbXSwgdHJhbnNmb3JtOiBGdW5jdGlvbiA9IG51bGwpIHtcbiAgICB0aGlzLnltaW4gPSBudWxsO1xuICAgIHRoaXMueW1heCA9IG51bGw7XG5cbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IHRoaXMuZGlzcGxheS5oZWlnaHQ7IHkrKykge1xuICAgICAgdGhpcy5sZWZ0RWRnZXNbeV0gPSAtMTtcbiAgICAgIHRoaXMucmlnaHRFZGdlc1t5XSA9IC0xO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgcGsgb2YgcHJvcGVydHlLZXlzKSB7XG4gICAgICBpZiAodGhpcy5sZWZ0RWRnZVByb3BlcnRpZXNbcGtdID09IG51bGwpIHtcbiAgICAgICAgdGhpcy5sZWZ0RWRnZVByb3BlcnRpZXNbcGtdID0gbmV3IEFycmF5KHRoaXMuZGlzcGxheS5oZWlnaHQpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5yaWdodEVkZ2VQcm9wZXJ0aWVzW3BrXSA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMucmlnaHRFZGdlUHJvcGVydGllc1twa10gPSBuZXcgQXJyYXkodGhpcy5kaXNwbGF5LmhlaWdodCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnJvd1Byb3BlcnR5RGVsdGFzW3BrXSA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMucm93UHJvcGVydHlEZWx0YXNbcGtdID0gbmV3IEFycmF5KHRoaXMuZGlzcGxheS5oZWlnaHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudHJhY2VFZGdlcyhcbiAgICAgIGZ1bmN0aW9uIHJhc3Rlcml6ZVRyYWNlRWRnZXMocDogUG9pbnQsIHByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVEaWN0aW9uYXJ5LCBlZGdlOiBFZGdlKSB7XG4gICAgICAgIC8vIFRPRE86IGdldCBtaW4vbWF4IGJ5IGRldGVjdGluZyB0b3AvYm90dG9tIHZlcnRleGVzIGRpcmVjdGx5XG4gICAgICAgIGlmICh0aGlzLnltaW4gPT0gbnVsbCB8fCBwLnkgPCB0aGlzLnltaW4pIHtcbiAgICAgICAgICAgIHRoaXMueW1pbiA9IHAueTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnltYXggPT0gbnVsbCB8fCBwLnkgPiB0aGlzLnltYXgpIHtcbiAgICAgICAgICAgIHRoaXMueW1heCA9IHAueTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENsaXBcbiAgICAgICAgaWYgKHRoaXMueW1pbiA8IDApIHtcbiAgICAgICAgICAgIHRoaXMueW1pbiA9IDA7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy55bWF4ID49IHRoaXMuZGlzcGxheS5oZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMueW1heCA9IHRoaXMuZGlzcGxheS5oZWlnaHQgLSAxO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVHJhY2sgZWRnZSB4IGNvb3JkaW5hdGVzIGFuZCBwcm9wZXJ0aWVzXG4gICAgICAgIGlmIChlZGdlID09PSBFZGdlLmxlZnQgfHwgZWRnZSA9PT0gRWRnZS5ib3RoKSB7XG4gICAgICAgICAgY29uc3QgbGVmdCA9IHRoaXMubGVmdEVkZ2VzW3AueV07XG4gICAgICAgICAgaWYgKGxlZnQgPT09IC0xIHx8IHAueCA8IGxlZnQpIHtcbiAgICAgICAgICAgIHRoaXMubGVmdEVkZ2VzW3AueV0gPSBwLng7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgayBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgIHRoaXMubGVmdEVkZ2VQcm9wZXJ0aWVzW2tdW3AueV0gPSBwcm9wZXJ0aWVzW2tdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlZGdlID09PSBFZGdlLnJpZ2h0IHx8IGVkZ2UgPT09IEVkZ2UuYm90aCkge1xuICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gdGhpcy5yaWdodEVkZ2VzW3AueV07XG4gICAgICAgICAgaWYgKHJpZ2h0ID09PSAtMSB8fCBwLnggPiByaWdodCkge1xuICAgICAgICAgICAgdGhpcy5yaWdodEVkZ2VzW3AueV0gPSBwLng7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgayBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgIHRoaXMucmlnaHRFZGdlUHJvcGVydGllc1trXVtwLnldID0gcHJvcGVydGllc1trXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBwcm9wZXJ0eUtleXNcbiAgICApO1xuXG4gICAgLy8gUHJlLWNvbXB1dGUgcmFzdGVyIHByb3BlcnR5IGRlbHRhc1xuICAgIGZvciAobGV0IHkgPSB0aGlzLnltaW47IHkgPD0gdGhpcy55bWF4OyB5KyspIHtcbiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5yaWdodEVkZ2VzW3ldIC0gdGhpcy5sZWZ0RWRnZXNbeV07XG4gICAgICBmb3IgKGNvbnN0IHBrIG9mIHByb3BlcnR5S2V5cykge1xuICAgICAgICB0aGlzLnJvd1Byb3BlcnR5RGVsdGFzW3BrXVt5XSA9ICh0aGlzLnJpZ2h0RWRnZVByb3BlcnRpZXNbcGtdW3ldIC0gdGhpcy5sZWZ0RWRnZVByb3BlcnRpZXNbcGtdW3ldKSAvIHdpZHRoO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5PVEU6IGhhdmUgbW9zdGx5IGRlcHJlY2F0ZWQgLyBub3QgdXNpbmcgdGhpcyBwZXItc2NhbmxpbmUgY2FsbGJhY2sgbWV0aG9kLFxuICAgIC8vIGJlY2F1c2UgaXQgaXMgdG9vIHNsb3cgKGRlZmVhdHMgb3B0aW1pemF0aW9ucz8gZnVuY3Rpb24gY2FsbCBvdmVyaGVhZCB0b28gaGlnaD8pXG5cbiAgICAvLyBUcmFuc2Zvcm0vcmVuZGVyIGVhY2ggc2NhbmxpbmVcbiAgICBpZiAodHlwZW9mIHRyYW5zZm9ybSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gdGhpcy5kaXNwbGF5LnN0YXJ0RnJhbWVUaW1lcigpO1xuICAgICAgY29uc3QgYXJncyA9IFtdO1xuICAgICAgZm9yIChsZXQgeSA9IHRoaXMueW1heDsgeSA+PSB0aGlzLnltaW47IHktLSkge1xuICAgICAgICBsZXQgcCA9IDA7XG4gICAgICAgIGFyZ3NbcCsrXSA9IHk7XG4gICAgICAgIGFyZ3NbcCsrXSA9IHRoaXMubGVmdEVkZ2VzW3ldO1xuICAgICAgICBhcmdzW3ArK10gPSB0aGlzLnJpZ2h0RWRnZXNbeV07XG5cbiAgICAgICAgZm9yIChjb25zdCBwayBvZiBwcm9wZXJ0eUtleXMpIHtcbiAgICAgICAgICBhcmdzW3ArK10gPSB0aGlzLmxlZnRFZGdlUHJvcGVydGllc1twa11beV07XG4gICAgICAgICAgYXJnc1twKytdID0gdGhpcy5yb3dQcm9wZXJ0eURlbHRhc1twa11beV07XG4gICAgICAgIH1cblxuICAgICAgICB0cmFuc2Zvcm0uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICB9XG4gICAgICAvLyB0aGlzLmRpc3BsYXkuZW5kRnJhbWVUaW1lcigpO1xuICAgIH1cbiAgfVxuXG4gIC8qIFJlbmRlcmluZyBtZXRob2RzICovXG5cbiAgcmVuZGVyRWRnZXMoY29sb3I6IG51bWJlcikge1xuICAgIHRoaXMudHJhY2VFZGdlcygocDogUG9pbnQpID0+IHtcbiAgICAgIHRoaXMuZGlzcGxheS5waXhlbHNbcC55ICogdGhpcy5kaXNwbGF5LndpZHRoICsgcC54XSA9IGNvbG9yO1xuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyR3JhZGllbnQoKSB7XG4gICAgdGhpcy5yYXN0ZXJpemUoXG4gICAgICBbJ3InLCAnZycsICdiJ10sXG4gICAgICBmdW5jdGlvbiByZW5kZXJTY2FubGluZShcbiAgICAgICAgeTogbnVtYmVyLCBsZWZ0OiBudW1iZXIsIHJpZ2h0OiBudW1iZXIsXG4gICAgICAgIHI6IG51bWJlciwgcmRlbHRhOiBudW1iZXIsXG4gICAgICAgIGc6IG51bWJlciwgZ2RlbHRhOiBudW1iZXIsXG4gICAgICAgIGI6IG51bWJlciwgYmRlbHRhOiBudW1iZXIpIHtcblxuICAgICAgICBsZXQgb2ZmID0geSAqIHRoaXMuZGlzcGxheS53aWR0aCArIGxlZnQ7XG5cbiAgICAgICAgZm9yIChsZXQgeCA9IGxlZnQ7IHggPCByaWdodDsgeCsrLCBvZmYrKykge1xuICAgICAgICAgIHRoaXMuZGlzcGxheS5waXhlbHNbb2ZmXSA9IHIgKyAoZyA8PCA4KSArIChiIDw8IDE2KSArICgyNTUgPDwgMjQpO1xuXG4gICAgICAgICAgciArPSByZGVsdGE7XG4gICAgICAgICAgZyArPSBnZGVsdGE7XG4gICAgICAgICAgYiArPSBiZGVsdGE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgc2V0VGV4dHVyZShpbWFnZURhdGE6IEltYWdlRGF0YSkge1xuICAgIHRoaXMudGV4dHVyZSA9IGltYWdlRGF0YTsgLy8gZnVsbCBJbWFnZURhdGEgcmVmZXJlbmNlXG4gICAgdGhpcy50ZXgzMiA9IG5ldyBVaW50MzJBcnJheSh0aGlzLnRleHR1cmUuZGF0YS5idWZmZXIpOyAvLyAzMi1iaXQgcmVmZXJlbmNlIHRvIGRhdGEgZm9yIGZhc3RlciBhY2Nlc3NcbiAgfVxuXG4gIHJlbmRlclRleHR1cmUoKSB7XG4gICAgaWYgKHRoaXMudGV4dHVyZSA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5yYXN0ZXJpemUoWyd1JywgJ3YnXSk7XG5cbiAgICB0aGlzLmRpc3BsYXkuc3RhcnRGcmFtZVRpbWVyKCk7XG4gICAgZm9yIChsZXQgeSA9IHRoaXMueW1pbjsgeSA8PSB0aGlzLnltYXg7IHkrKykge1xuICAgICAgbGV0IHUgPSB0aGlzLmxlZnRFZGdlUHJvcGVydGllcy51W3ldO1xuICAgICAgY29uc3QgdWRlbHRhID0gdGhpcy5yb3dQcm9wZXJ0eURlbHRhcy51W3ldO1xuXG4gICAgICBsZXQgdiA9IHRoaXMubGVmdEVkZ2VQcm9wZXJ0aWVzLnZbeV07XG4gICAgICBjb25zdCB2ZGVsdGEgPSB0aGlzLnJvd1Byb3BlcnR5RGVsdGFzLnZbeV07XG5cbiAgICAgIGNvbnN0IGxlZnQgPSB0aGlzLmxlZnRFZGdlc1t5XTtcbiAgICAgIGNvbnN0IHJpZ2h0ID0gdGhpcy5yaWdodEVkZ2VzW3ldO1xuXG4gICAgICBsZXQgb2ZmID0geSAqIHRoaXMuZGlzcGxheS53aWR0aCArIGxlZnQ7XG4gICAgICBmb3IgKGxldCB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHtcbiAgICAgICAgdGhpcy5kaXNwbGF5LnBpeGVsc1tvZmZdID0gdGhpcy50ZXgzMlsoKH5+dikgPDwgOCkgKyAofn51KV07XG5cbiAgICAgICAgdSArPSB1ZGVsdGE7XG4gICAgICAgIHYgKz0gdmRlbHRhO1xuICAgICAgICBvZmYrKztcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5kaXNwbGF5LmVuZEZyYW1lVGltZXIoKTtcbiAgfVxuXG4gIC8qIEZhY3RvcnkgbWV0aG9kcyAqL1xuXG4gIHN0YXRpYyB2ZXJ0ZXhlc0Zvck5TaWRlZChuOiBudW1iZXIsIHNpemU6IG51bWJlciwgb3B0aW9uczogeyB0ZXh0dXJlPzogeyB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9IH0gPSB7fSk6IFZlcnRleFtdIHtcbiAgICBjb25zdCB2ZXJ0ZXhlczogVmVydGV4W10gPSBbXTtcbiAgICBjb25zdCBhbmdsZTogbnVtYmVyID0gMzYwIC8gbjtcbiAgICBjb25zdCBhbmdsZU9mZjogbnVtYmVyID0gKG4gJiAxKSA/IDAgOiAoLWFuZ2xlIC8gMik7XG4gICAgY29uc3QgcCA9IG5ldyBQb2ludCgwLCAtc2l6ZSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkgKyspIHtcbiAgICAgIHZlcnRleGVzW2ldID0gUG9pbnQucm90YXRlKHAsIGFuZ2xlICogaSArIGFuZ2xlT2ZmKSBhcyBWZXJ0ZXg7XG5cbiAgICAgIC8vIEZpdCB0ZXh0dXJlIHRvIHBvbHlnb25cbiAgICAgIGlmIChvcHRpb25zLnRleHR1cmUgIT0gbnVsbCkge1xuICAgICAgICB2ZXJ0ZXhlc1tpXS51ID0gKHZlcnRleGVzW2ldLnggKyBzaXplKSAvIHNpemUgLyAyICogb3B0aW9ucy50ZXh0dXJlLndpZHRoO1xuICAgICAgICB2ZXJ0ZXhlc1tpXS52ID0gKHZlcnRleGVzW2ldLnkgKyBzaXplKSAvIHNpemUgLyAyICogb3B0aW9ucy50ZXh0dXJlLmhlaWdodDtcbiAgICAgICAgLy8gbG9nKFwidTogXCIgKyB2ZXJ0ZXhlc1tpXS51ICsgXCIsIHY6IFwiICsgdmVydGV4ZXNbaV0udik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGVzdGluZyBtb3JlIHByZWNpc2UgdGV4dHVyZSBmaXR0aW5nXG4gICAgLy8gaWYgKG9wdGlvbnMudGV4dHVyZSAhPSBudWxsKSB7XG4gICAgLy8gXHR2YXIgeG1pbiwgeG1heCwgeW1pbiwgeW1heDtcbiAgICAvLyBcdHZlcnRleGVzLmZvckVhY2goZnVuY3Rpb24gKHZlcnRleCkge1xuICAgIC8vIFx0XHRpZiAoeG1pbiA9PSBudWxsIHx8IHZlcnRleC54IDwgeG1pbikge1xuICAgIC8vIFx0XHRcdHhtaW4gPSB2ZXJ0ZXgueDtcbiAgICAvLyBcdFx0fVxuICAgIC8vIFx0XHRpZiAoeG1heCA9PSBudWxsIHx8IHZlcnRleC54ID4geG1heCkge1xuICAgIC8vIFx0XHRcdHhtYXggPSB2ZXJ0ZXgueDtcbiAgICAvLyBcdFx0fVxuXG4gICAgLy8gXHRcdGlmICh5bWluID09IG51bGwgfHwgdmVydGV4LnkgPCB5bWluKSB7XG4gICAgLy8gXHRcdFx0eW1pbiA9IHZlcnRleC55O1xuICAgIC8vIFx0XHR9XG4gICAgLy8gXHRcdGlmICh5bWF4ID09IG51bGwgfHwgdmVydGV4LnkgPiB5bWF4KSB7XG4gICAgLy8gXHRcdFx0eW1heCA9IHZlcnRleC55O1xuICAgIC8vIFx0XHR9XG4gICAgLy8gXHR9KTtcblxuICAgIC8vIFx0dmVydGV4ZXMuZm9yRWFjaChmdW5jdGlvbiAodmVydGV4KSB7XG4gICAgLy8gXHRcdHZlcnRleC51ID0gKHZlcnRleC54IC0geG1pbikgLyAoeG1heCAtIHhtaW4pICogKG9wdGlvbnMudGV4dHVyZS53aWR0aCAtIDIpICsgMTtcbiAgICAvLyBcdFx0dmVydGV4LnYgPSAodmVydGV4LnkgLSB5bWluKSAvICh5bWF4IC0geW1pbikgKiAob3B0aW9ucy50ZXh0dXJlLmhlaWdodCAtIDIpICsgMTtcbiAgICAvLyBcdFx0Ly8gbG9nKFwidTogXCIgKyB2ZXJ0ZXgudSArIFwiLCB2OiBcIiArIHZlcnRleC52KTtcbiAgICAvLyBcdH0pO1xuICAgIC8vIH1cblxuICAgIHJldHVybiB2ZXJ0ZXhlcztcbiAgfVxuXG59XG4iLCJpbXBvcnQgUG9pbnQgZnJvbSAnLi9wb2ludCc7XG5cbmludGVyZmFjZSBDb2xvckRpY3Rpb25hcnkge1xuICBbaW5kZXg6IHN0cmluZ106IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXI/XTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGlzcGxheSB7XG4gIHdpZHRoOiBudW1iZXI7XG4gIGhlaWdodDogbnVtYmVyO1xuICBwaXhlbFJhdGlvOiBudW1iZXI7XG4gIG9yaWdpbjogUG9pbnQ7XG5cbiAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gIGltYWdlRGF0YTogSW1hZ2VEYXRhO1xuICBwaXhlbHM6IFVpbnQzMkFycmF5O1xuICBiYWNrZ3JvdW5kOiBVaW50MzJBcnJheTtcblxuICBmcmFtZTogbnVtYmVyO1xuICBlbGFwc2VkOiBudW1iZXI7XG4gIGxhc3RUaW1lOiBudW1iZXI7XG4gIHN0YXJ0RnJhbWVUaW1lOiBudW1iZXI7XG4gIGZyYW1lVGltZTogbnVtYmVyO1xuICBmcHNTYW1wbGVSYW5nZTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50LCBvcHRpb25zOiBhbnkgPSB7fSkge1xuICAgIHRoaXMuZnJhbWUgPSAwO1xuICAgIHRoaXMuZWxhcHNlZCA9IDA7XG4gICAgdGhpcy5sYXN0VGltZSA9IDA7XG4gICAgdGhpcy5mcHNTYW1wbGVSYW5nZSA9IG9wdGlvbnMuZnBzU2FtcGxlUmFuZ2UgfHwgMjAwO1xuICAgIHRoaXMuc3RhcnRGcmFtZVRpbWUgPSAwO1xuICAgIHRoaXMuZnJhbWVUaW1lID0gMDtcblxuICAgIHRoaXMucGl4ZWxSYXRpbyA9IG9wdGlvbnMucGl4ZWxSYXRpbyB8fCAxO1xuICAgIHRoaXMud2lkdGggPSB3aWR0aCAqIHRoaXMucGl4ZWxSYXRpbztcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodCAqIHRoaXMucGl4ZWxSYXRpbztcblxuICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy53aWR0aDtcbiAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICB0aGlzLmNhbnZhcy5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YFxuICAgIHRoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG5cbiAgICB0aGlzLm9yaWdpbiA9IHsgeDogdGhpcy53aWR0aCAvIDIsIHk6IHRoaXMuaGVpZ2h0IC8gMiB9O1xuXG4gICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgIHRoaXMuaW1hZ2VEYXRhID0gdGhpcy5jdHguY3JlYXRlSW1hZ2VEYXRhKHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcbiAgICB0aGlzLnBpeGVscyA9IG5ldyBVaW50MzJBcnJheSh0aGlzLmltYWdlRGF0YS5kYXRhLmJ1ZmZlcik7XG4gICAgdGhpcy5iYWNrZ3JvdW5kID0gbmV3IFVpbnQzMkFycmF5KHRoaXMucGl4ZWxzLmxlbmd0aCk7XG4gICAgdGhpcy5iYWNrZ3JvdW5kLnNldCh0aGlzLnBpeGVscyk7XG4gIH1cblxuICBjbGVhclNjcmVlbigpIHtcbiAgICB0aGlzLnBpeGVscy5zZXQodGhpcy5iYWNrZ3JvdW5kKTtcbiAgfVxuXG4gIGJsaXRTY3JlZW4oKSB7XG4gICAgdGhpcy5jdHgucHV0SW1hZ2VEYXRhKHRoaXMuaW1hZ2VEYXRhLCAwLCAwKTtcbiAgfVxuXG4gIGFkdmFuY2VGcmFtZSh0aW1lOiBudW1iZXIpIHtcbiAgICB0aGlzLmZyYW1lKys7XG5cbiAgICAvLyBUcmFjayBGUFNcbiAgICBpZiAodGltZSAhPSBudWxsICYmIHRoaXMubGFzdFRpbWUgIT0gbnVsbCkge1xuICAgICAgdGhpcy5lbGFwc2VkICs9IHRpbWUgLSB0aGlzLmxhc3RUaW1lO1xuXG4gICAgICAvLyBSZXNldCBGUFMgdGltZXIgZXZlcnkgTiBmcmFtZXNcbiAgICAgIGlmICh0aGlzLmZyYW1lICUgdGhpcy5mcHNTYW1wbGVSYW5nZSA9PSAwKSB7XG4gICAgICAgIHRoaXMuZWxhcHNlZCA9IDA7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubGFzdFRpbWUgPSB0aW1lO1xuICB9XG5cbiAgZnBzKCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKDEwMDAgLyAodGhpcy5lbGFwc2VkIC8gKHRoaXMuZnJhbWUgJSB0aGlzLmZwc1NhbXBsZVJhbmdlKSkpO1xuICB9XG5cbiAgdGltZVBlckZyYW1lKCkge1xuICAgIHJldHVybiAodGhpcy5mcmFtZVRpbWUgLyB0aGlzLmZyYW1lKTtcbiAgfVxuXG4gIHN0YXJ0RnJhbWVUaW1lcigpIHtcbiAgICB0aGlzLnN0YXJ0RnJhbWVUaW1lID0gK25ldyBEYXRlKCk7XG4gIH1cblxuICBlbmRGcmFtZVRpbWVyKCkge1xuICAgIHRoaXMuZnJhbWVUaW1lICs9ICgrbmV3IERhdGUoKSkgLSB0aGlzLnN0YXJ0RnJhbWVUaW1lO1xuICB9XG5cbiAgLyoqKiBDbGFzcyBtZXRob2RzICoqKi9cblxuICBzdGF0aWMgcmdiYShyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXIgPSBudWxsKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHIgfCAoZyA8PCA4KSB8IChiIDw8IDE2KSB8ICgoYSB8fCAyNTUpIDw8IDI0KSk7XG4gIH1cblxuICAvLyBNb2RpZnkgdGhlIFJHQiBjb21wb25lbnRzIChsb3dlciAyNCBiaXRzKSBhbmQgbGVhdmUgdGhlIGFscGhhIGNvbXBvbmVudCAodG9wIDggYml0cykgYWxvbmVcbiAgc3RhdGljIHNldFJHQihwOiBudW1iZXIsIHJnYjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKChyZ2IgJiAofigyNTUgPDwgMjQpKSkgfCAocCAmICgyNTUgPDwgMjQpKSk7XG4gIH1cblxuICAvLyBNb2RpZnkgdGhlIGFscGhhIGNvbXBvbmVudCAodG9wIDggYml0cykgYW5kIGxlYXZlIHRoZSBSR0IgaW4gdGhlIGxvd2VyIDI0IGJpdHMgYWxvbmVcbiAgc3RhdGljIHNldEFscGhhKHA6IG51bWJlciwgYTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKChwICYgKH4oMjU1IDw8IDI0KSkpIHwgKGEgPDwgMjQpKTtcbiAgfVxuXG4gIC8vIExvYWQgYW4gaW1hZ2UgZnJvbSBVUkxcbiAgc3RhdGljIGFzeW5jIGxvYWRJbWFnZSh1cmw6IHN0cmluZyk6IFByb21pc2U8SFRNTEltYWdlRWxlbWVudD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKGltZyk7XG4gICAgICBpbWcub25lcnJvciA9ICgpID0+IHJlamVjdCgpO1xuICAgICAgaW1nLnNyYyA9IHVybDtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYW4gSW1hZ2VEYXRhIG9iamVjdCwgZ2l2ZW4gYW4gSW1hZ2Ugb2JqZWN0ICh2aWEgcmVuZGVyaW5nIG9uIGEgY2FudmFzKVxuICBzdGF0aWMgZGF0YUZyb21JbWFnZShpbWc6IEhUTUxJbWFnZUVsZW1lbnQpOiBJbWFnZURhdGF8bnVsbCB7XG4gICAgaWYgKGltZyA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjYW52YXMud2lkdGggPSBpbWcud2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7XG5cbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgaW1nLndpZHRoLCBpbWcuaGVpZ2h0KTtcbiAgICBjb25zdCBpbWFnZURhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGltZy53aWR0aCwgaW1nLmhlaWdodCk7XG5cbiAgICByZXR1cm4gaW1hZ2VEYXRhO1xuICB9XG5cbiAgLy8gTWFrZSBhIHBhbGV0dGUgZnJvbSBncmFkaWVudHNcbiAgc3RhdGljIG1ha2VQYWxldHRlRm9yR3JhZGllbnRzKGNvbG9yczogQ29sb3JEaWN0aW9uYXJ5LCBiYW5kczogQXJyYXk8W251bWJlciwgbnVtYmVyLCBzdHJpbmcsIHN0cmluZ10+KTogVWludDMyQXJyYXkge1xuICAgIGxldCBtYXhwOm51bWJlciA9IG51bGw7XG4gICAgYmFuZHMuZm9yRWFjaChmdW5jdGlvbiAoYmFuZCkge1xuICAgICAgaWYgKG1heHAgPT0gbnVsbCB8fCBiYW5kWzFdID4gbWF4cCkge1xuICAgICAgICBtYXhwID0gYmFuZFsxXTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IHBhbGV0dGUgPSBuZXcgVWludDMyQXJyYXkobWF4cCk7XG5cbiAgICBiYW5kcy5mb3JFYWNoKGZ1bmN0aW9uIChiYW5kKSB7XG4gICAgICB2YXIgcCwgYjEsIGIyLCBjMSwgYzI7XG5cbiAgICAgIGIxID0gYmFuZFswXTtcbiAgICAgIGIyID0gYmFuZFsxXTtcbiAgICAgIGMxID0gY29sb3JzW2JhbmRbMl1dO1xuICAgICAgYzIgPSBjb2xvcnNbYmFuZFszXV07XG5cbiAgICAgIGZvciAocCA9IGIxOyBwIDwgYjEgKyBiMjsgcCsrKSB7XG4gICAgICAgIHBhbGV0dGVbcF0gPVxuICAgICAgICAgICgoKGMyWzBdIC0gYzFbMF0pICogKHAgLSBiMSkgLyAoYjIgLSBiMSkpICsgYzFbMF0pIHxcbiAgICAgICAgICAoKCgoYzJbMV0gLSBjMVsxXSkgKiAocCAtIGIxKSAvIChiMiAtIGIxKSkgKyBjMVsxXSkgPDwgOCkgfFxuICAgICAgICAgICgoKChjMlsyXSAtIGMxWzJdKSAqIChwIC0gYjEpIC8gKGIyIC0gYjEpKSArIGMxWzJdKSA8PCAxNikgfFxuICAgICAgICAgICgyNTUgPDwgMjQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHBhbGV0dGU7XG4gIH1cblxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9pbnQge1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcih4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgIHJldHVybiB7IHgsIHkgfTtcbiAgfVxuXG4gIHN0YXRpYyBjb3B5KHA6IFBvaW50KTogUG9pbnQge1xuICAgIGlmIChwID09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4geyB4OiBwLngsIHk6IHAueSB9O1xuICB9XG5cbiAgc3RhdGljIGVxdWFscyhmaXJzdDogUG9pbnQsIHNlY29uZDogUG9pbnQpOiBib29sZWFuIHtcbiAgICBpZiAoZmlyc3QgPT0gbnVsbCB8fCBzZWNvbmQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gKGZpcnN0LnggPT0gc2Vjb25kLnggJiYgZmlyc3QueSA9PSBzZWNvbmQueSk7XG4gIH1cblxuICBzdGF0aWMgcm90YXRlKHA6IFBvaW50LCB0aGV0YTogbnVtYmVyKTogUG9pbnQge1xuICAgIHJldHVybiBuZXcgUG9pbnQoXG4gICAgICBwLnggKiBNYXRoLmNvcyh0aGV0YSAqIE1hdGguUEkgLyAxODApICsgcC55ICogLU1hdGguc2luKHRoZXRhICogTWF0aC5QSSAvIDE4MCksXG4gICAgICBwLnggKiBNYXRoLnNpbih0aGV0YSAqIE1hdGguUEkgLyAxODApICsgcC55ICogTWF0aC5jb3ModGhldGEgKiBNYXRoLlBJIC8gMTgwKVxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgcHJpbnQocDogUG9pbnQpOiBzdHJpbmcge1xuICAgIGlmIChwID09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gXCIoXCIgKyBwLnggKyBcIiwgXCIgKyBwLnkgKyBcIilcIjtcbiAgfVxuXG59XG4iLCJpbXBvcnQgUG9pbnQgZnJvbSAnLi9wb2ludCc7XG5cbi8vIGV4cG9ydCBjbGFzcyBMaW5lIHtcbi8vIFx0c3RhcnQ6IFBvaW50O1xuLy8gXHRlbmQ6IFBvaW50O1xuXG4vLyBcdGNvbnN0cnVjdG9yKHN0YXJ0LCBlbmQpIHtcbi8vIFx0XHR0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4vLyBcdFx0dGhpcy5lbmQgPSBlbmQ7XG4vLyBcdH1cbi8vIH1cblxuaW50ZXJmYWNlIExpbmUge1xuICBzdGFydDogUG9pbnQ7XG4gIGVuZDogUG9pbnQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcGVydHlWYWx1ZURpY3Rpb25hcnkge1xuICBbaW5kZXg6IHN0cmluZ106IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcm9wZXJ0eVJhbmdlRGljdGlvbmFyeSB7XG4gIFtpbmRleDogc3RyaW5nXTogW251bWJlciwgbnVtYmVyXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGluZVRyYWNlciB7XG4gIHBvc2l0aW9uOiBQb2ludDtcbiAgcHJvcGVydGllczogUHJvcGVydHlWYWx1ZURpY3Rpb25hcnk7XG5cbiAgcHJpdmF0ZSBsaW5lOiBMaW5lO1xuICBwcml2YXRlIGRlbHRhOiBQb2ludDtcbiAgcHJpdmF0ZSBzdGVwOiBQb2ludDtcbiAgcHJpdmF0ZSBhY2N1bXVsYXRvcjogbnVtYmVyO1xuICBwcml2YXRlIHByb3BlcnR5RGVsdGFzOiBQcm9wZXJ0eVZhbHVlRGljdGlvbmFyeTtcblxuICBjb25zdHJ1Y3RvcihsaW5lOiBMaW5lLCBwcm9wZXJ0aWVzOiBQcm9wZXJ0eVJhbmdlRGljdGlvbmFyeSA9IHt9KSB7XG4gICAgdGhpcy5saW5lID0gbGluZTtcblxuICAgIC8vIEZvcmNlcyBpbnRlZ2VycyAvIHdob2xlIHBpeGVsc1xuICAgIHRoaXMubGluZS5zdGFydC54ID0gTWF0aC5yb3VuZCh0aGlzLmxpbmUuc3RhcnQueCk7XG4gICAgdGhpcy5saW5lLnN0YXJ0LnkgPSBNYXRoLnJvdW5kKHRoaXMubGluZS5zdGFydC55KTtcblxuICAgIHRoaXMubGluZS5lbmQueCA9IE1hdGgucm91bmQodGhpcy5saW5lLmVuZC54KTtcbiAgICB0aGlzLmxpbmUuZW5kLnkgPSBNYXRoLnJvdW5kKHRoaXMubGluZS5lbmQueSk7XG5cbiAgICB0aGlzLnBvc2l0aW9uID0gUG9pbnQuY29weSh0aGlzLmxpbmUuc3RhcnQpO1xuXG4gICAgLy8gQnJlc2VuaGFtLXN0eWxlIGxpbmUgaXRlcmF0b3JcbiAgICB0aGlzLmRlbHRhID0gbmV3IFBvaW50KFxuICAgICAgTWF0aC5hYnModGhpcy5saW5lLmVuZC54IC0gdGhpcy5saW5lLnN0YXJ0LngpLFxuICAgICAgTWF0aC5hYnModGhpcy5saW5lLmVuZC55IC0gdGhpcy5saW5lLnN0YXJ0LnkpXG4gICAgKTtcblxuICAgIHRoaXMuc3RlcCA9IG5ldyBQb2ludChcbiAgICAgICh0aGlzLmxpbmUuc3RhcnQueCA8IHRoaXMubGluZS5lbmQueCkgPyAxIDogLTEsXG4gICAgICAodGhpcy5saW5lLnN0YXJ0LnkgPCB0aGlzLmxpbmUuZW5kLnkpID8gMSA6IC0xXG4gICAgKTtcblxuICAgIHRoaXMuYWNjdW11bGF0b3IgPSAodGhpcy5kZWx0YS54ID49IHRoaXMuZGVsdGEueSkgPyAodGhpcy5kZWx0YS54IC8gMikgOiAodGhpcy5kZWx0YS55IC8gMik7XG5cbiAgICAvLyBPcHRpb25hbGx5IGludGVycG9sYXRlIGJldHdlZW4gYWRkaXRpb25hbGx5IHByb3ZpZGVkIG5hbWVkIHByb3BlcnR5IHJhbmdlcywgcGFzc2VkIGluIHRoZSBmb3JtIG9mOlxuICAgIC8vIHByb3BlcnRpZXMgPSB7IGtleTE6IFtmcm9tLCB0b10sIGtleTI6IFtmcm9tLCB0b10sIC4uLiB9XG4gICAgaWYgKE9iamVjdC5rZXlzKHByb3BlcnRpZXMpLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMucHJvcGVydGllcyA9IHt9O1xuICAgICAgdGhpcy5wcm9wZXJ0eURlbHRhcyA9IHt9O1xuXG4gICAgICBmb3IgKGNvbnN0IGsgaW4gcHJvcGVydGllcykge1xuICAgICAgICB0aGlzLnByb3BlcnRpZXNba10gPSBwcm9wZXJ0aWVzW2tdWzBdO1xuICAgICAgICB0aGlzLnByb3BlcnR5RGVsdGFzW2tdID0gKHByb3BlcnRpZXNba11bMV0gLSBwcm9wZXJ0aWVzW2tdWzBdKTtcbiAgICAgICAgaWYgKHRoaXMuZGVsdGEueCA+PSB0aGlzLmRlbHRhLnkpIHtcbiAgICAgICAgICB0aGlzLnByb3BlcnR5RGVsdGFzW2tdIC89IHRoaXMuZGVsdGEueDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB0aGlzLnByb3BlcnR5RGVsdGFzW2tdIC89IHRoaXMuZGVsdGEueTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG5leHQoKSB7XG4gICAgaWYgKHRoaXMucG9zaXRpb24gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbHNlIGlmIChQb2ludC5lcXVhbHModGhpcy5wb3NpdGlvbiwgdGhpcy5saW5lLmVuZCkpIHtcbiAgICAgIHRoaXMucG9zaXRpb24gPSBudWxsO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmRlbHRhLnggPj0gdGhpcy5kZWx0YS55KSB7XG4gICAgICB0aGlzLnBvc2l0aW9uLnggKz0gdGhpcy5zdGVwLng7XG5cbiAgICAgIGlmICh0aGlzLnN0ZXAueSAhPSAwKSB7XG4gICAgICAgIHRoaXMuYWNjdW11bGF0b3IgLT0gdGhpcy5kZWx0YS55O1xuICAgICAgICBpZiAodGhpcy5hY2N1bXVsYXRvciA8IDApIHtcbiAgICAgICAgICB0aGlzLnBvc2l0aW9uLnkgKz0gdGhpcy5zdGVwLnk7XG4gICAgICAgICAgdGhpcy5hY2N1bXVsYXRvciArPSB0aGlzLmRlbHRhLng7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLnBvc2l0aW9uLnkgKz0gdGhpcy5zdGVwLnk7XG5cbiAgICAgIGlmICh0aGlzLnN0ZXAueCAhPSAwKSB7XG4gICAgICAgIHRoaXMuYWNjdW11bGF0b3IgLT0gdGhpcy5kZWx0YS54O1xuICAgICAgICBpZiAodGhpcy5hY2N1bXVsYXRvciA8IDApIHtcbiAgICAgICAgICB0aGlzLnBvc2l0aW9uLnggKz0gdGhpcy5zdGVwLng7XG4gICAgICAgICAgdGhpcy5hY2N1bXVsYXRvciArPSB0aGlzLmRlbHRhLnk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGRpdGlvbmFsIHByb3BlcnRpZXNcbiAgICBpZiAodGhpcy5wcm9wZXJ0aWVzICE9IG51bGwpIHtcbiAgICAgIGZvciAoY29uc3QgayBpbiB0aGlzLnByb3BlcnRpZXMpIHtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzW2tdICs9IHRoaXMucHJvcGVydHlEZWx0YXNba107XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cbiIsImltcG9ydCBEaXNwbGF5IGZyb20gJy4vZGlzcGxheSc7XG5pbXBvcnQgUG9pbnQgZnJvbSAnLi9wb2ludCc7XG5pbXBvcnQgUG9seWdvbiBmcm9tICcuL3BvbHlnb24nO1xuaW1wb3J0IEhlaWdodG1hcFBvbHlnb24gZnJvbSAnLi9oZWlnaHRtYXAnO1xuXG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJykgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG5jb25zdCBwaXhlbFJhdGlvID0gMTsgLy93aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbmNvbnN0IGRpc3BsYXkgPSBuZXcgRGlzcGxheSg1NjAsIDU2MCwgY2FudmFzLCB7IHBpeGVsUmF0aW8gfSk7IC8vIDcwMCwgNzAwXG5cbmNvbnN0IHBvbHlnb25TaXplID0gMjI1ICogcGl4ZWxSYXRpbztcbmNvbnN0IHBvbHlnb24gPSBuZXcgSGVpZ2h0bWFwUG9seWdvbihQb2x5Z29uLnZlcnRleGVzRm9yTlNpZGVkKDYsIHBvbHlnb25TaXplLCB7IHRleHR1cmU6IHsgd2lkdGg6IDI1NiwgaGVpZ2h0OiAyNTYgfSB9KSwgZGlzcGxheSk7IC8vIDMwMFxuLy8gY29uc3QgcG9seWdvbiA9IG5ldyBQb2x5Z29uKFBvbHlnb24udmVydGV4ZXNGb3JOU2lkZWQoNiwgMjI1LCB7IHRleHR1cmU6IHsgd2lkdGg6IDI1NiwgaGVpZ2h0OiAyNTYgfSB9KSwgZGlzcGxheSk7IC8vIDMwMFxucG9seWdvbi5wb3NpdGlvbiA9IG5ldyBQb2ludCgwLCA1MCk7XG5cbi8vIEdyYWRpZW50IHRoZSB2ZXJ0ZXhlcyAtIHVudXNlZCBpbiBoZWlnaHRtYXAgZGVtbywgYnV0IGNhbiB1c2Ugd2l0aCBwb2x5Z29uLnJlbmRlckdyYWRpZW50KClcbnBvbHlnb24udmVydGV4ZXMuZm9yRWFjaChmdW5jdGlvbiAodmVydGV4LCBwOiBudW1iZXIpIHtcbiAgdmVydGV4LnIgPSBwICogMjU2IC8gcG9seWdvbi52ZXJ0ZXhlcy5sZW5ndGggKyAwO1xuICB2ZXJ0ZXguZyA9ICgocCArIHBvbHlnb24udmVydGV4ZXMubGVuZ3RoIC8gMykgJSBwb2x5Z29uLnZlcnRleGVzLmxlbmd0aCkgKiAyNTYgLyBwb2x5Z29uLnZlcnRleGVzLmxlbmd0aCArIDA7XG4gIHZlcnRleC5iID0gKChwICsgcG9seWdvbi52ZXJ0ZXhlcy5sZW5ndGggKiAyIC8gMykgJSBwb2x5Z29uLnZlcnRleGVzLmxlbmd0aCkgKiAyNTYgLyBwb2x5Z29uLnZlcnRleGVzLmxlbmd0aCArIDA7XG59KTtcblxuLy8gTG9hZCB0ZXh0dXJlL2hlaWdodG1hcCBhbmQgY29uZmlndXJlZFxuKGFzeW5jICgpID0+IHtcbiAgY29uc3QgaW1nOiBIVE1MSW1hZ2VFbGVtZW50ID0gYXdhaXQgRGlzcGxheS5sb2FkSW1hZ2UoJ2hlaWdodG1hcC5wbmcnKTtcblxuICBsZXQgcGFsZXR0ZSwgcCwgYztcblxuICBwb2x5Z29uLnNldFRleHR1cmUoRGlzcGxheS5kYXRhRnJvbUltYWdlKGltZykpO1xuXG4gIC8vIE1ha2UgdGhlIHRlcnJhaW4gcGFsZXR0ZVxuICBwYWxldHRlID0gRGlzcGxheS5tYWtlUGFsZXR0ZUZvckdyYWRpZW50cyhcbiAgICB7XG4gICAgICBwdXJlX2JsdWU6IFswLCAwLCAyNTVdLFxuICAgICAgZGFya19ibHVlOiBbMCwgMjYsIDI1NV0sXG4gICAgICBtZWRfYmx1ZTogWzAsIDEwMywgMjU1XSxcbiAgICAgIGxpZ2h0X2JsdWU6IFswLCAxNzksIDI1NV0sXG4gICAgICBkYXJrX2dyZWVuOiBbMCwgODAsIDEzXSxcbiAgICAgIG1lZF9ncmVlbjogWzY0LCAxMjgsIDBdLFxuICAgICAgbGlnaHRfZ3JlZW46IFsxMjgsIDE5NiwgMF0sXG4gICAgICBicm93bjogWzgwLCA0OCwgMF0sXG4gICAgICB3aGl0ZTogWzI1MiwgMjUyLCAyNTJdXG4gICAgfSxcbiAgICBbXG4gICAgICBbMCwgOCwgJ3B1cmVfYmx1ZScsICdkYXJrX2JsdWUnXSxcbiAgICAgIFs4LCAyNCwgJ2RhcmtfYmx1ZScsICdtZWRfYmx1ZSddLFxuICAgICAgWzI0LCAzMiwgJ21lZF9ibHVlJywgJ2xpZ2h0X2JsdWUnXSxcbiAgICAgIFszMiwgNjQsICdkYXJrX2dyZWVuJywgJ21lZF9ncmVlbiddLFxuICAgICAgWzY0LCAxMjAsICdtZWRfZ3JlZW4nLCAnbGlnaHRfZ3JlZW4nXSxcbiAgICAgIFsxMjAsIDE4MCwgJ2xpZ2h0X2dyZWVuJywgJ2Jyb3duJ10sXG4gICAgICBbMTgwLCAyMTAsICdicm93bicsICd3aGl0ZSddLFxuICAgICAgWzIxMCwgMjU2LCAnd2hpdGUnLCAnd2hpdGUnXVxuICAgIF1cbiAgICApO1xuXG4gICAgLy8gUmVtYXAgZ3JheXNjYWxlIGhlaWdodG1hcCB0byBwYWxldHRlLCBhbmQgYWRqdXN0IGhlaWdodFxuICAgIGZvciAocCA9IDA7IHAgPCBwb2x5Z29uLnRleHR1cmUud2lkdGggKiBwb2x5Z29uLnRleHR1cmUuaGVpZ2h0OyBwICsrKSB7XG4gICAgICBjID0gcG9seWdvbi50ZXgzMltwXSAmIDI1NTtcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9ubHkgdXNlIHRoZSByZWQgdmFsdWVcbiAgICAgIHBvbHlnb24udGV4MzJbcF0gPSBwYWxldHRlW2NdO1x0XHRcdFx0XHRcdFx0XHRcdC8vIExvb2stdXAgUkdCIGluIHBhbGV0dGVcbiAgICAgIHBvbHlnb24udGV4MzJbcF0gPSBEaXNwbGF5LnNldEFscGhhKHBvbHlnb24udGV4MzJbcF0sIGMgLyAyKTtcdC8vIFNjYWxlIGhlaWdodCBieSBoYWxmXG4gICAgfVxuXG4gICAgLyogRXhwZXJpbWVudGluZyB3aXRoIGFsdGVybmF0ZSwgZ2VvbWV0cmljIGhlaWdodG1hcHMgKi9cblxuICAgIC8vIEZpbG0gbm9pcmlzaCBjaXR5IGVmZmVjdFxuICAgIC8vIGZvciAodmFyIHkgPSAwOyB5IDwgMjU2OyB5KyspIHtcbiAgICAvLyBcdGZvciAodmFyIHggPSAwOyB4IDwgMjU2OyB4KyspIHtcbiAgICAvLyBcdFx0cG9seWdvbi50ZXgzMlt5KjI1Nit4XSA9IERpc3BsYXkuc2V0QWxwaGEocG9seWdvbi50ZXgzMlt5KjI1Nit4XSwgKCh4ID4+IDQpICYgKHkgPj4gNCkpIDw8IDUpO1xuICAgIC8vIFx0fVxuICAgIC8vIH1cblxuICAgIC8vIFNhbXBsZSBwYWxldHRlIHN3YXRjaFxuICAgIC8vIGZvciAocCA9IDA7IHAgPCAyNTY7IHArKykge1xuICAgIC8vIFx0ZGlzcGxheS5iYWNrZ3JvdW5kW3AgKyAoZGlzcGxheS5oZWlnaHQgLSAxKSAqIGRpc3BsYXkud2lkdGhdID0gcGFsZXR0ZVtwXSB8ICgyNTUgPDwgMjQpO1xuICAgIC8vIFx0ZGlzcGxheS5iYWNrZ3JvdW5kW3AgKyAoZGlzcGxheS5oZWlnaHQgLSAyKSAqIGRpc3BsYXkud2lkdGhdID0gcGFsZXR0ZVtwXSB8ICgyNTUgPDwgMjQpO1xuICAgIC8vIFx0ZGlzcGxheS5iYWNrZ3JvdW5kW3AgKyAoZGlzcGxheS5oZWlnaHQgLSAzKSAqIGRpc3BsYXkud2lkdGhdID0gcGFsZXR0ZVtwXSB8ICgyNTUgPDwgMjQpO1xuICAgIC8vIFx0ZGlzcGxheS5iYWNrZ3JvdW5kW3AgKyAoZGlzcGxheS5oZWlnaHQgLSA0KSAqIGRpc3BsYXkud2lkdGhdID0gcGFsZXR0ZVtwXSB8ICgyNTUgPDwgMjQpO1xuICAgIC8vIFx0ZGlzcGxheS5iYWNrZ3JvdW5kW3AgKyAoZGlzcGxheS5oZWlnaHQgLSA1KSAqIGRpc3BsYXkud2lkdGhdID0gcGFsZXR0ZVtwXSB8ICgyNTUgPDwgMjQpO1xuICAgIC8vIH1cblxuICAgIC8vIFN0YXJ0IHJlbmRlcmluZ1xuICAgIGxvb3AoKTtcbiAgfSkoKTtcblxuICAvLyBLZXlib2FyZCBjb250cm9scyAtIGN1cnJlbnRseSB1bnVzZWQsIGJ1dCBjYW4gdW5jb21tZW50IGlucHV0IGNvZGUgaW4gcmVuZGVyIGxvb3AgdG8gY29udHJvbCBkaXJlY3RseVxuICBsZXQga2V5ID0gbnVsbDtcblxuICBkb2N1bWVudC5vbmtleWRvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAzNykge1xuICAgICAga2V5ID0gJ2xlZnQnO1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudC5rZXlDb2RlID09IDM5KSB7XG4gICAgICBrZXkgPSAncmlnaHQnO1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudC5rZXlDb2RlID09IDM4KSB7XG4gICAgICBrZXkgPSAndXAnO1xuICAgIH1cbiAgICBlbHNlIGlmIChldmVudC5rZXlDb2RlID09IDQwKSB7XG4gICAgICBrZXkgPSAnZG93bic7XG4gICAgfVxuICB9XG5cbiAgZG9jdW1lbnQub25rZXl1cCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIGtleSA9IG51bGw7XG4gIH1cblxuICAvLyBSZW5kZXIgbG9vcFxuICBsZXQgdmVsID0gMC41O1xuXG4gIGZ1bmN0aW9uIGxvb3AgKHRpbWU6IG51bWJlciA9ICgrbmV3IERhdGUoKSkpIHtcbiAgICBkaXNwbGF5LmNsZWFyU2NyZWVuKCk7XG5cbiAgICAvLyBwb2x5Z29uLnJlbmRlckdyYWRpZW50KCk7XG4gICAgLy8gcG9seWdvbi5yZW5kZXJFZGdlcyhEaXNwbGF5LnJnYmEoMjU1LCAyNTUsIDI1NSkpO1xuICAgIC8vIHBvbHlnb24ucmVuZGVyVGV4dHVyZSgpO1xuICAgIHBvbHlnb24ucmVuZGVySGVpZ2h0bWFwKCk7XG5cbiAgICBwb2x5Z29uLnJvdGF0aW9uICs9IHZlbDtcblxuICAgIC8vIElucHV0IChpbnN0ZWFkIG9mIGF1dG8tcm90YXRlIGFib3ZlKVxuICAgIC8vIGlmIChrZXkgPT0gJ2xlZnQnKSB7XG4gICAgLy8gXHRwb2x5Z29uLnJvdGF0aW9uIC09IDE7XG4gICAgLy8gfVxuICAgIC8vIGVsc2UgaWYgKGtleSA9PSAncmlnaHQnKSB7XG4gICAgLy8gXHRwb2x5Z29uLnJvdGF0aW9uICs9IDE7XG4gICAgLy8gfVxuXG4gICAgLy8gaWYgKGtleSA9PSAndXAnKSB7XG4gICAgLy8gXHRwb2x5Z29uLnpvb20gKz0gMC4wMjtcbiAgICAvLyBcdGlmIChwb2x5Z29uLnpvb20gPiAzKSB7XG4gICAgLy8gXHRcdHBvbHlnb24uem9vbSA9IDM7XG4gICAgLy8gXHR9XG4gICAgLy8gfVxuICAgIC8vIGVsc2UgaWYgKGtleSA9PSAnZG93bicpIHtcbiAgICAvLyBcdHBvbHlnb24uem9vbSAtPSAwLjAyO1xuICAgIC8vIFx0aWYgKHBvbHlnb24uem9vbSA8IDEpIHtcbiAgICAvLyBcdFx0cG9seWdvbi56b29tID0gMTtcbiAgICAvLyBcdH1cbiAgICAvLyB9XG5cbiAgICBkaXNwbGF5LmJsaXRTY3JlZW4oKTtcbiAgICBkaXNwbGF5LmFkdmFuY2VGcmFtZSh0aW1lKTtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4gIH1cbiIsImltcG9ydCBQb2x5Z29uLCB7IFZlcnRleCB9IGZyb20gJy4vcG9seWdvbic7XG5pbXBvcnQgRGlzcGxheSBmcm9tICcuL2Rpc3BsYXknO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWlnaHRtYXBQb2x5Z29uIGV4dGVuZHMgUG9seWdvbiB7XG4gIHhoZWlnaHRzOiBJbnQxNkFycmF5O1xuICB4aGVpZ2h0c19lbXB0eTogSW50MTZBcnJheTtcblxuICBjb25zdHJ1Y3Rvcih2ZXJ0ZXhlczogVmVydGV4W10sIGRpc3BsYXk6IERpc3BsYXkpIHtcbiAgICBzdXBlcih2ZXJ0ZXhlcywgZGlzcGxheSk7XG5cbiAgICAvLyBUcmFja3MgdGhlIGhpZ2hlc3QgcG9pbnQgcmVuZGVyZWQgc28gZmFyIGZvciBlYWNoIHggdmFsdWVcbiAgICB0aGlzLnhoZWlnaHRzID0gbmV3IEludDE2QXJyYXkodGhpcy5kaXNwbGF5LndpZHRoKTtcblxuICAgIC8vIFJlc2V0cyB4IHZhbHVlcyBlYWNoIGZyYW1lIHNvIHRoYXQgd2Ugb25seSBuZWVkIHRvIGFsbG9jYXRlIHRoZSBhcnJheSBvbmNlXG4gICAgdGhpcy54aGVpZ2h0c19lbXB0eSA9IG5ldyBJbnQxNkFycmF5KHRoaXMuZGlzcGxheS53aWR0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnhoZWlnaHRzX2VtcHR5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLnhoZWlnaHRzX2VtcHR5W2ldID0gdGhpcy5kaXNwbGF5LmhlaWdodDtcbiAgICB9XG4gIH1cblxuICByZW5kZXJIZWlnaHRtYXAoKSB7XG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0LCBwaXhlbHMgfSA9IHRoaXMuZGlzcGxheTtcblxuICAgIGlmICh0aGlzLnRleHR1cmUgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZGlzcGxheS5zdGFydEZyYW1lVGltZXIoKTtcblxuICAgIHRoaXMucmFzdGVyaXplKFsndScsICd2J10pO1xuICAgIHRoaXMueGhlaWdodHMuc2V0KHRoaXMueGhlaWdodHNfZW1wdHkpO1xuXG4gICAgLy8gUmVuZGVyIHNjYW5saW5lcyBib3R0b20gdG8gdG9wLCB0byBtaW5pbWl6ZSAjIG9mIHBpeGVscyBkcmF3biAobm8gaGlkZGVuIHRlcnJhaW4gd2lsbCBiZSByZW5kZXJlZClcbiAgICBmb3IgKGxldCB5ID0gdGhpcy55bWF4OyB5ID49IHRoaXMueW1pbjsgeS0tKSB7XG4gICAgICBsZXQgdSA9IHRoaXMubGVmdEVkZ2VQcm9wZXJ0aWVzLnVbeV07XG4gICAgICBsZXQgdiA9IHRoaXMubGVmdEVkZ2VQcm9wZXJ0aWVzLnZbeV07XG5cbiAgICAgIGNvbnN0IHVkZWx0YSA9IHRoaXMucm93UHJvcGVydHlEZWx0YXMudVt5XTtcbiAgICAgIGNvbnN0IHZkZWx0YSA9IHRoaXMucm93UHJvcGVydHlEZWx0YXMudlt5XTtcblxuICAgICAgbGV0IGxlZnQgPSB0aGlzLmxlZnRFZGdlc1t5XTtcbiAgICAgIGxldCByaWdodCA9IHRoaXMucmlnaHRFZGdlc1t5XTtcblxuICAgICAgLy8gQ2xpcCBsZWZ0L3JpZ2h0IG9mIHNjcmVlblxuICAgICAgaWYgKGxlZnQgPCAwKSB7XG4gICAgICAgIHUgKz0gKC1sZWZ0KSAqIHVkZWx0YTtcbiAgICAgICAgdiArPSAoLWxlZnQpICogdmRlbHRhO1xuICAgICAgICBsZWZ0ID0gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKHJpZ2h0ID49IHdpZHRoKSB7XG4gICAgICAgIHJpZ2h0ID0gd2lkdGg7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbmRlciBzY2FubGluZVxuICAgICAgZm9yIChsZXQgeCA9IGxlZnQ7IHggPCByaWdodDsgeCsrKSB7XG4gICAgICAgIC8vIEdldCB0ZXh0dXJlIHZhbHVlIC0gdXNpbmcgfn4gaW50ZWdlciB0eXBlY2FzdCBub3RhdGlvbiB3YXMgZmFzdGVyIHRoYW4gTWF0aC5yb3VuZCgpXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnRleDMyWygofn52KSA8PCA4KSArICh+fnUpXTsgLy8gaGFyZC1jb2RlZCBmb3IgMjU2LXdpZHRoIHRleHR1cmVcblxuICAgICAgICAvLyBEZXRlcm1pbmUgaG93IGhpZ2ggdGhpcyBzbGljZSBvZiB0ZXJyYWluIGlzXG4gICAgICAgIGxldCBoID0gdCA+Pj4gMjQ7XG4gICAgICAgIGggPSB5IC0gaDtcblxuICAgICAgICBpZiAoaCA8IDApIHtcbiAgICAgICAgICBoID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpcnN0IHNsaWNlIGZvciB0aGlzIHggY29vcmQ/XG4gICAgICAgIGlmICh0aGlzLnhoZWlnaHRzW3hdID09IGhlaWdodCkge1xuICAgICAgICAgIHRoaXMueGhlaWdodHNbeF0gPSBoO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT25seSBkcmF3IHRoZSBwYXJ0IG9mIHRoZSBzbGljZSAoaWYgYW55KSB0aGF0IGlzIHZpc2libGUgKHdhc24ndCBwcmV2aW91c2x5IHJlbmRlcmVkKVxuICAgICAgICBpZiAoaCA8IHRoaXMueGhlaWdodHNbeF0pIHtcbiAgICAgICAgICBsZXQgb2ZmID0gdGhpcy54aGVpZ2h0c1t4XSAqIHdpZHRoICsgeDtcblxuICAgICAgICAgIGZvciAobGV0IHogPSB0aGlzLnhoZWlnaHRzW3hdOyB6ID49IGg7IHotLSkge1xuICAgICAgICAgICAgcGl4ZWxzW29mZl0gPSB0IHwgKDI1NSA8PCAyNCk7XG4gICAgICAgICAgICBvZmYgLT0gd2lkdGg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy54aGVpZ2h0c1t4XSA9IGg7XG4gICAgICAgIH1cblxuICAgICAgICB1ICs9IHVkZWx0YTtcbiAgICAgICAgdiArPSB2ZGVsdGE7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZGlzcGxheS5lbmRGcmFtZVRpbWVyKCk7XG4gIH1cblxufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=